"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[38],{2657:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var n=s(4848),r=s(8453);const i={sidebar_position:3},a="Entities/Events/Rules in the Schema",o={id:"getting-started/entities-events-rules-namespace-schema",title:"Entities/Events/Rules in the Schema",description:"In the previous page, we have established that we have a single entity orders. For orders, we have a single event called new-order. And",source:"@site/docs/getting-started/entities-events-rules-namespace-schema.md",sourceDirName:"getting-started",slug:"/getting-started/entities-events-rules-namespace-schema",permalink:"/docs/getting-started/entities-events-rules-namespace-schema",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Sample App Namespace Schema",permalink:"/docs/getting-started/sample-app-namespace-schema"},next:{title:"Consumers in the Schema",permalink:"/docs/getting-started/consumers-schema"}},l={},c=[];function d(e){const t={a:"a",code:"code",h1:"h1",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"entitieseventsrules-in-the-schema",children:"Entities/Events/Rules in the Schema"})}),"\n",(0,n.jsxs)(t.p,{children:["In the previous page, we have established that we have a single entity ",(0,n.jsx)(t.code,{children:"orders"}),". For orders, we have a single event called ",(0,n.jsx)(t.code,{children:"new-order"}),". And\nWhen we get the event ",(0,n.jsx)(t.code,{children:"new-order"})," of entity ",(0,n.jsx)(t.code,{children:"orders"}),", we run the single rule ",(0,n.jsx)(t.code,{children:"notify-customer-new-order-rule"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Let's see what ",(0,n.jsx)(t.a,{href:"https://github.com/ralphv/gallifrey-rules-sample/blob/main/src/modules/plugins/rules/NotifyCustomerNewOrderRule.ts#L16",children:"the rule looks like in our sample example"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["The rule plugin has to provide at least two methods. ",(0,n.jsx)(t.code,{children:"getModuleName"})," which is required by all modules and\n",(0,n.jsx)(t.code,{children:"trigger"})," which is the entry of the rule."]}),"\n",(0,n.jsxs)(t.p,{children:["In the ",(0,n.jsx)(t.code,{children:"trigger"})," method, you can see a simple 3-step logic."]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Pull customer information using customerID: This is external data and so it should be done through\nan DataObject plugin. ",(0,n.jsx)(t.strong,{children:"Remember its very important that your rule only has business logic"})," It should not pull data and it should not mutate data."]}),"\n",(0,n.jsx)(t.li,{children:"Create an email body: Once you get the customer info, we can put together a nice email."}),"\n",(0,n.jsx)(t.li,{children:"Send an email notifying new order: Once the email body is ready, now we have to send this email.\nSending the email is a mutation, basically an action that changes or does something in your system. In this case\nit will send/queue the email."}),"\n"]}),"\n",(0,n.jsx)(t.hr,{}),"\n",(0,n.jsxs)(t.p,{children:["Rule: ",(0,n.jsx)(t.a,{href:"https://github.com/ralphv/gallifrey-rules-sample/blob/main/src/modules/plugins/rules/NotifyCustomerNewOrderRule.ts#L16",children:"NotifyCustomerNewOrderRule"})]}),"\n",(0,n.jsxs)(t.p,{children:["DataObject: ",(0,n.jsx)(t.a,{href:"https://github.com/ralphv/gallifrey-rules-sample/blob/main/src/modules/plugins/data-objects/CustomerInfoDataObject.ts#L13",children:"CustomerInfoDataObject"})]}),"\n",(0,n.jsxs)(t.p,{children:["Action: ",(0,n.jsx)(t.a,{href:"https://github.com/ralphv/gallifrey-rules-sample/blob/main/src/modules/plugins/actions/SendEmailAction.ts#L13",children:"SendEmailAction"})]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>o});var n=s(6540);const r={},i=n.createContext(r);function a(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);