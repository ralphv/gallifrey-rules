"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[454],{8594:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var s=t(4848),o=t(8453);const a={sidebar_position:3},i="Async Actions",c={id:"advanced/async-actions",title:"Async Actions",description:"A powerful feature that Gallifrey Rules engine providers is to transform Actions into Async Actions.",source:"@site/docs/advanced/async-actions.md",sourceDirName:"advanced",slug:"/advanced/async-actions",permalink:"/docs/advanced/async-actions",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Configs",permalink:"/docs/advanced/configs"},next:{title:"Distributed Locks",permalink:"/docs/advanced/distributed-locks"}},r={},l=[{value:"Steps to support Async Actions.",id:"steps-to-support-async-actions",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"async-actions",children:"Async Actions"})}),"\n",(0,s.jsx)(n.p,{children:"A powerful feature that Gallifrey Rules engine providers is to transform Actions into Async Actions."}),"\n",(0,s.jsx)(n.p,{children:"When you get an event and run a rule and that rule triggers an action, that action is called synchronously within the event processing itself."}),"\n",(0,s.jsx)(n.p,{children:"Many times some actions can benefit of transforming them into async actions. When an action is tagged as Async, instead of the engine directly calling the plugin, it will bundle the payload of the action and offload that to another Kafka topic. Another consumer will pick this up and run the action(s). In future release of Gallifrey Rules, support will be added to Batch Async Actions."}),"\n",(0,s.jsx)(n.p,{children:"Offloading the action into async action will decouple the action from the event processing. It will also allow you to scale the async processing independently."}),"\n",(0,s.jsx)(n.p,{children:"Depending on their nature, not all actions can be done asynchronously."}),"\n",(0,s.jsx)(n.h3,{id:"steps-to-support-async-actions",children:"Steps to support Async Actions."}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["You need to decorate your Action with an additional decorator ",(0,s.jsx)(n.a,{href:"https://github.com/ralphv/gallifrey-rules/blob/main/src/interfaces/InterfaceDecorators.ts#L89",children:"@AsyncAction"})]}),"\n",(0,s.jsxs)(n.li,{children:["You need to explicitly define the ",(0,s.jsx)(n.a,{href:"https://github.com/ralphv/gallifrey-rules/blob/main/src/lib/NamespaceSchema.ts#L13",children:"ActionQueuerProvider"})," in your schema."]}),"\n",(0,s.jsxs)(n.li,{children:["You need to explicitly activate the action from the schema using ",(0,s.jsx)(n.a,{href:"https://github.com/ralphv/gallifrey-rules/blob/main/src/lib/NamespaceSchema.ts#L25",children:"$asyncActions"})]}),"\n",(0,s.jsxs)(n.li,{children:["You need to have at least one new consumer of type ",(0,s.jsx)(n.code,{children:"'kafka:async-actions'"})," ",(0,s.jsx)(n.a,{href:"https://github.com/ralphv/gallifrey-rules/blob/eba421d60ac17b72003fe152fea4a73afe76f51a/tests/integration/async-actions/namespace.ts#L29",children:"See sample code"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var s=t(6540);const o={},a=s.createContext(o);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);